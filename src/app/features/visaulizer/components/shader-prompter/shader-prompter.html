<section class="prompter" aria-label="Shader prompt" [class.prompter--minimized]="isMinimized">
  <header class="prompter__header">
    <h2>Shader Prompter</h2>
    <span class="prompter__status">{{ generationStatus }}</span>
    <div class="prompter__minimize-wrap">
      <button
        type="button"
        class="prompter__minimize"
        (click)="toggleMinimized()"
        [attr.aria-label]="isMinimized ? 'Expand shader prompter' : 'Minimize shader prompter'"
        [attr.aria-expanded]="!isMinimized"
      >
        <span aria-hidden="true">{{ isMinimized ? '+' : '-' }}</span>
      </button>
      <div class="prompter__hint" role="note">Show shader prompter</div>
    </div>
  </header>

  <div class="prompter__body">
    @if (generatedActive) {
      <p class="prompter__active" role="status">Generated shader active</p>
    }

    <label for="shader-prompt">Prompt</label>
    <textarea
      id="shader-prompt"
      rows="4"
      [formControl]="promptControl"
      placeholder="Describe the shader style, motion and audio reaction..."
    ></textarea>
    @if (errorMessage) {
      <p class="prompter__error" role="status">{{ errorMessage }}</p>
    }
    <button type="button" class="generate" (click)="onGenerate()" [disabled]="isGenerateDisabled()">
      @if (isLoading) {
        <span class="generate__spinner" aria-hidden="true"></span>
        <span>Generating...</span>
      } @else {
        <span>Generate</span>
      }
    </button>
  </div>
</section>
